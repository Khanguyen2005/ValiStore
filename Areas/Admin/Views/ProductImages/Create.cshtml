@{
 var product = ViewBag.Product as ValiModern.Models.EF.Product;
 ViewBag.Title = "Upload Images";
 Layout = "~/Areas/Admin/Views/Shared/_AdminLayout.cshtml";
}
<div class="container-xl py-3">
 <h2 class="h5 fw-bold mb-3">Upload images - @product?.name (ID:@product?.id)</h2>
 @using (Html.BeginForm(null, null, FormMethod.Post, new { enctype = "multipart/form-data" }))
 {
 @Html.AntiForgeryToken()
 @Html.Hidden("productId", product.id)
 <div class="img-dropzone border rounded-3 p-4 text-center bg-light position-relative" style="cursor:pointer;">
 <input type="file" name="imageFiles" multiple accept="image/*" class="position-absolute top-0 start-0 w-100 h-100 opacity-0" />
 <div class="dz-text">
 <i class="bi bi-cloud-upload fs-1 text-primary"></i>
 <p class="mb-1">Drag & drop images here or click to choose</p>
 <small class="text-muted">Allowed: jpg, jpeg, png, gif, webp</small>
 </div>
 <div class="row g-2 mt-2" data-preview-list></div>
 </div>
 <div class="mt-3">
 <a href="@Url.Action("Index", new { productId = product.id })" class="btn btn-outline-secondary">Back</a>
 <button type="submit" class="btn btn-primary">Upload</button>
 </div>
 }
</div>
@section scripts {
 <script src="~/Scripts/Admin/image-dropzone.js"></script>
 <script>
 (function(){
 var dz = document.querySelector('.img-dropzone');
 var input = dz.querySelector('input[type=file]');
 var list = dz.querySelector('[data-preview-list]');
 function addPreview(file){
 var reader = new FileReader();
 var col = document.createElement('div'); col.className='col-6 col-md-3';
 var img = document.createElement('img'); img.className='img-fluid rounded'; img.style.maxHeight='120px';
 reader.onload=function(e){ img.src=e.target.result; };
 reader.readAsDataURL(file);
 col.appendChild(img); list.appendChild(col);
 }
 input.addEventListener('change', function(){ list.innerHTML=''; if(input.files){ for(var i=0;i<input.files.length;i++){ addPreview(input.files[i]); } }});
 dz.addEventListener('drop', function(){ list.innerHTML=''; if(input.files){ for(var i=0;i<input.files.length;i++){ addPreview(input.files[i]); } }});
 })();
 </script>
}