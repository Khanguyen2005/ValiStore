@model ValiModern.Models.ViewModels.DashboardVM
@{
    ViewBag.Title = "Dashboard";
    Layout = "~/Areas/Admin/Views/Shared/_AdminLayout.cshtml";
}

<div class="container-xl py-3">
    <h2 class="h4 fw-bold mb-4">Dashboard Overview</h2>

    <!-- Order Statistics Cards -->
    <div class="row g-3 mb-4">
        <div class="col-md-4">
         <div class="card border-0 shadow-sm h-100">
                <div class="card-body">
   <div class="d-flex justify-content-between align-items-center">
       <div>
           <h6 class="text-muted mb-1">Total Orders</h6>
        <h3 class="mb-0">@Model.TotalOrders</h3>
  </div>
    <div class="bg-primary bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center" style="width: 56px; height: 56px;">
               <i class="bi bi-receipt fs-4 text-primary"></i>
    </div>
         </div>
                </div>
        </div>
   </div>
        <div class="col-md-4">
            <div class="card border-0 shadow-sm h-100">
      <div class="card-body">
            <div class="d-flex justify-content-between align-items-center">
 <div>
  <h6 class="text-muted mb-1">Pending Orders</h6>
            <h3 class="mb-0 text-warning">@Model.PendingOrders</h3>
        </div>
 <div class="bg-warning bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center" style="width: 56px; height: 56px;">
           <i class="bi bi-clock-history fs-4 text-warning"></i>
                   </div>
  </div>
     </div>
       </div>
        </div>
        <div class="col-md-4">
     <div class="card border-0 shadow-sm h-100">
           <div class="card-body">
    <div class="d-flex justify-content-between align-items-center">
             <div>
                <h6 class="text-muted mb-1">Delivered Orders</h6>
      <h3 class="mb-0 text-success">@Model.DeliveredOrders</h3>
   </div>
           <div class="bg-success bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center" style="width: 56px; height: 56px;">
    <i class="bi bi-check-circle fs-4 text-success"></i>
     </div>
</div>
     </div>
            </div>
        </div>
    </div>

    <!-- Revenue Statistics -->
    <div class="row g-3 mb-4">
        <div class="col-md-4">
   <div class="card border-0 shadow-sm h-100">
       <div class="card-body">
      <div class="d-flex justify-content-between align-items-center">
     <div>
           <h6 class="text-muted mb-1">Total Revenue</h6>
   <h3 class="mb-0">@Model.TotalRevenue.ToString("N0") đ</h3>
          </div>
       <div class="bg-success bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center" style="width: 56px; height: 56px;">
      <i class="bi bi-currency-dollar fs-4 text-success"></i>
               </div>
      </div>
   </div>
 </div>
    </div>
        <div class="col-md-4">
         <div class="card border-0 shadow-sm h-100">
       <div class="card-body">
        <div class="d-flex justify-content-between align-items-center">
    <div>
  <h6 class="text-muted mb-1">Today's Revenue</h6>
            <h3 class="mb-0">@Model.TodayRevenue.ToString("N0") đ</h3>
             </div>
    <div class="bg-info bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center" style="width: 56px; height: 56px;">
          <i class="bi bi-calendar-day fs-4 text-info"></i>
             </div>
</div>
                </div>
 </div>
        </div>
        <div class="col-md-4">
     <div class="card border-0 shadow-sm h-100">
     <div class="card-body">
         <div class="d-flex justify-content-between align-items-center">
   <div>
  <h6 class="text-muted mb-1">This Month</h6>
       <h3 class="mb-0">@Model.MonthRevenue.ToString("N0") đ</h3>
  </div>
 <div class="bg-primary bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center" style="width: 56px; height: 56px;">
   <i class="bi bi-calendar-month fs-4 text-primary"></i>
   </div>
        </div>
        </div>
 </div>
      </div>
  </div>

    <!-- Products & Users Statistics -->
    <div class="row g-3 mb-4">
        <div class="col-md-3">
        <div class="card border-0 shadow-sm h-100">
     <div class="card-body">
         <div class="d-flex justify-content-between align-items-center">
      <div>
        <h6 class="text-muted mb-1">Total Products</h6>
    <h3 class="mb-0">@Model.TotalProducts</h3>
  </div>
 <div class="bg-secondary bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center" style="width: 56px; height: 56px;">
  <i class="bi bi-box-seam fs-4 text-secondary"></i>
    </div>
         </div>
     </div>
        </div>
        </div>
        <div class="col-md-3">
      <div class="card border-0 shadow-sm h-100">
         <div class="card-body">
    <div class="d-flex justify-content-between align-items-center">
    <div>
   <h6 class="text-muted mb-1">Active Products</h6>
    <h3 class="mb-0 text-success">@Model.ActiveProducts</h3>
              </div>
            <div class="bg-success bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center" style="width: 56px; height: 56px;">
     <i class="bi bi-check2-square fs-4 text-success"></i>
    </div>
        </div>
      </div>
    </div>
      </div>
      <div class="col-md-3">
   <div class="card border-0 shadow-sm h-100">
                <div class="card-body">
         <div class="d-flex justify-content-between align-items-center">
        <div>
         <h6 class="text-muted mb-1">Low Stock</h6>
      <h3 class="mb-0 text-danger">@Model.LowStockProducts</h3>
            </div>
      <div class="bg-danger bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center" style="width: 56px; height: 56px;">
<i class="bi bi-exclamation-triangle fs-4 text-danger"></i>
          </div>
            </div>
             </div>
       </div>
        </div>
        <div class="col-md-3">
            <div class="card border-0 shadow-sm h-100">
      <div class="card-body">
  <div class="d-flex justify-content-between align-items-center">
             <div>
        <h6 class="text-muted mb-1">Total Users</h6>
        <h3 class="mb-0">@Model.TotalUsers</h3>
          </div>
              <div class="bg-info bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center" style="width: 56px; height: 56px;">
          <i class="bi bi-people fs-4 text-info"></i>
            </div>
         </div>
             </div>
     </div>
      </div>
    </div>

    <!-- Order Status Overview & Recent Orders -->
    <div class="row g-3 mb-4">
        <div class="col-lg-6">
            <div class="card border-0 shadow-sm h-100">
            <div class="card-header bg-white">
       <h6 class="mb-0 fw-bold">Order Status Overview</h6>
            </div>
 <div class="card-body">
  <div class="mb-3">
        <div class="d-flex justify-content-between mb-1">
    <span>Pending</span>
    <span class="badge bg-warning text-dark">@Model.PendingOrders</span>
        </div>
      <div class="progress" style="height: 20px;">
     <div class="progress-bar bg-warning" role="progressbar" style="width: @(Model.TotalOrders > 0 ? (Model.PendingOrders * 100.0 / Model.TotalOrders) : 0)%"></div>
         </div>
          </div>
                    <div class="mb-3">
             <div class="d-flex justify-content-between mb-1">
            <span>Processing</span>
     <span class="badge bg-info">@Model.ProcessingOrders</span>
   </div>
     <div class="progress" style="height: 20px;">
       <div class="progress-bar bg-info" role="progressbar" style="width: @(Model.TotalOrders > 0 ? (Model.ProcessingOrders * 100.0 / Model.TotalOrders) : 0)%"></div>
               </div>
       </div>
  <div class="mb-3">
        <div class="d-flex justify-content-between mb-1">
                 <span>Shipped</span>
      <span class="badge bg-primary">@Model.ShippedOrders</span>
            </div>
         <div class="progress" style="height: 20px;">
   <div class="progress-bar bg-primary" role="progressbar" style="width: @(Model.TotalOrders > 0 ? (Model.ShippedOrders * 100.0 / Model.TotalOrders) : 0)%"></div>
         </div>
        </div>
<div class="mb-3">
      <div class="d-flex justify-content-between mb-1">
    <span>Delivered</span>
   <span class="badge bg-success">@Model.DeliveredOrders</span>
              </div>
<div class="progress" style="height: 20px;">
  <div class="progress-bar bg-success" role="progressbar" style="width: @(Model.TotalOrders > 0 ? (Model.DeliveredOrders * 100.0 / Model.TotalOrders) : 0)%"></div>
        </div>
        </div>
     <div>
    <div class="d-flex justify-content-between mb-1">
      <span>Cancelled</span>
       <span class="badge bg-danger">@Model.CancelledOrders</span>
     </div>
        <div class="progress" style="height: 20px;">
       <div class="progress-bar bg-danger" role="progressbar" style="width: @(Model.TotalOrders > 0 ? (Model.CancelledOrders * 100.0 / Model.TotalOrders) : 0)%"></div>
  </div>
              </div>
</div>
    </div>
        </div>

        <!-- Recent Orders -->
        <div class="col-lg-6">
     <div class="card border-0 shadow-sm h-100">
   <div class="card-header bg-white d-flex justify-content-between align-items-center">
           <h6 class="mb-0 fw-bold">Recent Orders</h6>
        <a href="@Url.Action("Index", "Order")" class="btn btn-sm btn-outline-primary">View All</a>
             </div>
         <div class="card-body p-0">
           @if (Model.RecentOrders != null && Model.RecentOrders.Any())
 {
     <div class="list-group list-group-flush">
   @foreach (var order in Model.RecentOrders)
       {
           <a href="@Url.Action("Details", "Order", new { id = order.Id })" class="list-group-item list-group-item-action">
      <div class="d-flex justify-content-between align-items-center">
               <div>
             <strong>#@order.Id</strong> - @order.UserName
            <br />
            <small class="text-muted">@order.OrderDate.ToString("dd/MM/yyyy HH:mm")</small>
     </div>
                 <div class="text-end">
               <div class="mb-1"><strong>@order.TotalAmount.ToString("N0") đ</strong></div>
           @switch (order.Status)
 {
     case "Pending":
           <span class="badge bg-warning text-dark">Pending</span>
    break;
          case "Confirmed":
    <span class="badge bg-info">Confirmed</span>
      break;
     case "Shipped":
             <span class="badge bg-primary">Shipped</span>
         break;
  case "Completed":
       <span class="badge bg-success">Completed</span>
        break;
      case "Cancelled":
        <span class="badge bg-danger">Cancelled</span>
   break;
            default:
     <span class="badge bg-secondary">@order.Status</span>
   break;
          }
     </div>
        </div>
   </a>
        }
               </div>
        }
  else
          {
          <p class="text-center text-muted py-4">No recent orders</p>
  }
        </div>
  </div>
    </div>
    </div>

    <!-- Top Products -->
    <div class="row g-3">
        <div class="col-12">
         <div class="card border-0 shadow-sm">
      <div class="card-header bg-white d-flex justify-content-between align-items-center">
      <h6 class="mb-0 fw-bold">Top Selling Products</h6>
         <a href="@Url.Action("Index", "Product")" class="btn btn-sm btn-outline-primary">View All</a>
           </div>
     <div class="card-body">
       @if (Model.TopProducts != null && Model.TopProducts.Any())
      {
      <div class="table-responsive">
 <table class="table table-hover align-middle mb-0">
           <thead class="table-light">
              <tr>
            <th style="width: 80px"></th>
     <th>Product</th>
            <th>Sold</th>
     <th>Revenue</th>
       <th></th>
          </tr>
 </thead>
        <tbody>
      @foreach (var product in Model.TopProducts)
          {
          <tr>
           <td>
   @if (!string.IsNullOrEmpty(product.ImageUrl))
       {
          <img src="@Url.Content("~" + product.ImageUrl)" alt="@product.Name" class="img-thumbnail" style="width: 60px; height: 60px; object-fit: cover;" />
     }
     else
 {
              <div class="bg-light d-flex align-items-center justify-content-center" style="width: 60px; height: 60px;">
       <i class="bi bi-image text-muted"></i>
  </div>
  }
               </td>
        <td>
          <strong>@product.Name</strong><br />
      <small class="text-muted">ID: @product.Id</small>
           </td>
        <td><strong>@product.Sold</strong> units</td>
<td><strong class="text-success">@product.Revenue.ToString("N0") đ</strong></td>
               <td>
       <a href="@Url.Action("Edit", "Product", new { id = product.Id })" class="btn btn-sm btn-outline-primary">
           <i class="bi bi-pencil"></i>
  </a>
             </td>
            </tr>
      }
     </tbody>
      </table>
         </div>
               }
    else
       {
        <p class="text-center text-muted py-4">No products found</p>
   }
        </div>
       </div>
        </div>
    </div>
</div>

